import{d as b,o as h,i as $,w as n,j as t,u as e,B as U,m as P,C as O,D as T,k as y,E as K,I as G,K as W,L as I,M as X,f as u,e as J,N as S,s as Q,v as w,p as E,R as Y,h as A,T as g,X as Z,q as ee}from"./app-D9se1uPC.js";import{e as j,F as C,_ as V,a as N,b as q,c as H,d as R,u as te}from"./Input.vue_vue_type_script_setup_true_lang-DXEpRX8H.js";import{E as ae,_ as ne,S as se,a as ie,b as oe,c as le,d as ce,e as de,f as B,g as re,h as ue,i as me,j as _e,k as fe,l as pe}from"./FilterBarPresentation.vue_vue_type_script_setup_true_lang-CZe5s71I.js";const ge=b({__name:"DropdownIdentityDocumentOptions",props:{identity_document:{}},emits:["update:identity-document-form"],setup(r,{emit:s}){const d=r,m=s;function _(){m("update:identity-document-form",d.identity_document)}return(o,i)=>(h(),$(e(G),null,{default:n(()=>[t(e(U),{"as-child":""},{default:n(()=>[t(e(j),{variant:"ghost",class:"w-8 h-8 p-0"},{default:n(()=>[i[0]||(i[0]=P("span",{class:"sr-only"},"Abrir menu",-1)),t(e(ae),{class:"w-4 h-4"})]),_:1})]),_:1}),t(e(O),{align:"end"},{default:n(()=>[t(e(T),null,{default:n(()=>i[1]||(i[1]=[y("Opciones")])),_:1}),t(ne,{class:"w-full"},{default:n(()=>[t(e(K),{onClick:_,class:"flex items-center gap-x-2 text-sky-700 dark:text-sky-500 py-2 cursor-pointer"},{default:n(()=>[t(e(se),{class:"w-5 h-5"}),i[2]||(i[2]=y(" Editar "))]),_:1})]),_:1})]),_:1})]),_:1}))}});function ye(r,s){const d=()=>X(`${u.identity_document}/${u.list_action}?page=${s.page}&limit=${s.limit}&searchInput=${s.searchParam}`),{data:m,..._}=W(r,d,s),o=I(()=>{var c;return((c=m.value)==null?void 0:c.data)??[]}),i=I(()=>{var c;return((c=m.value)==null?void 0:c.meta)??null});return{data:o,meta:i,..._}}function he(r){return J(S.identity_document,r)}const $e={class:"flex flex-col sm:grid grid-cols-2 gap-x-2 gap-y-1 overflow-y-auto max-h-[71vh] p-1"},De=b({__name:"IdentityDocumentModal",props:{form:{}},emits:["reset"],setup(r,{emit:s}){const d=r,m=s;function _(){m("reset")}const o=I(()=>!!d.form.values.id),i=I(()=>({url:`${u.identity_document}/${o.value?u.update_action:u.store_action}`,method:o.value?u.put:u.post})),{isPending:c,mutateAsync:x}=he(i),D=d.form.handleSubmit(v=>Q(x(v),`${o.value?"Editando":"Agregando"}...`,()=>(_(),`Documento ${o.value?"actualizado":"agregado"} con éxito`),l=>typeof l=="object"?(d.form.setErrors(l),"Acción fallida"):l));return(v,l)=>(h(),$(e(de),{class:"sm:max-w-[600px] text-slate-800 dark:dark:text-slate-200"},{default:n(()=>[t(e(ie),null,{default:n(()=>[t(e(oe),null,{default:n(()=>[y(w(o.value?"Editar":"Agregar")+" documento de identidad",1)]),_:1}),t(e(le),null,{default:n(()=>[y(" Haz los cambios del documento de identidad aquí. Click "+w(o.value?"Editar":"Agregar")+" cuando termines. ",1)]),_:1})]),_:1}),P("form",{onSubmit:l[0]||(l[0]=(...p)=>e(D)&&e(D)(...p)),"keep-values":""},[P("section",$e,[t(e(C),{name:"abbreviation"},{default:n(({componentField:p})=>[t(e(V),null,{default:n(()=>[t(e(N),null,{default:n(()=>l[1]||(l[1]=[y("Nombre")])),_:1}),t(e(q),null,{default:n(()=>[t(e(H),E(p,{autocomplete:"off"}),null,16)]),_:2},1024),t(e(R))]),_:2},1024)]),_:1}),t(e(C),{name:"description"},{default:n(({componentField:p})=>[t(e(V),null,{default:n(()=>[t(e(N),null,{default:n(()=>l[2]||(l[2]=[y("Dirección")])),_:1}),t(e(q),null,{default:n(()=>[t(e(H),E(p,{autocomplete:"off"}),null,16)]),_:2},1024),t(e(R))]),_:2},1024)]),_:1})]),t(e(ce),null,{default:n(()=>[t(e(j),{type:"submit",class:"w-full mt-3 p-1",disabled:e(c)},{default:n(()=>[y(w(o.value?"Editar":"Agregar"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1}))}}),ve=b({__name:"IdentityDocumentContainer",setup(r){const s=Y({page:1,limit:window.innerWidth<768?5:10,searchParam:""}),{isFetching:d,data:m,meta:_}=ye(S.identity_document,s),o={id:void 0,abbreviation:"",description:""},i=pe(),c=te(),x=()=>{c.setValues(o)},D=a=>{c.setValues(a)},v=a=>{s.page=1,s.searchParam=a},l=a=>{s.page=a},p=a=>{s.page=1,s.limit=a},F=A(0),k=A(!1),z=()=>{k.value=!1},L=[i.display({id:"select",header:({table:a})=>g(B,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:checked":f=>a.toggleAllPageRowsSelected(!!f),ariaLabel:"Select all",class:"mr-2 md:mr-0"}),cell:({row:a})=>g(B,{checked:a.getIsSelected(),"onUpdate:checked":f=>a.toggleSelected(!!f),ariaLabel:"Select row"}),enableHiding:!1}),i.accessor("id",{header:"ID",cell:a=>g("span",a.getValue())}),i.accessor("abbreviation",{header:"Abreviación",cell:a=>g("div",{class:"capitalize text-center sm:text-start"},a.getValue())}),i.accessor("description",{header:"Descripción",cell:a=>g("div",{class:"capitalize min-w-28"},a.getValue())}),i.display({id:"actions",cell:({row:a})=>{const f=a.original;return g("div",{class:"relative"},g(ge,{identity_document:f,"onUpdate:identityDocumentForm":D}))},enableHiding:!1})];return(a,f)=>(h(),$(e(fe),{open:k.value,"onUpdate:open":f[0]||(f[0]=M=>k.value=M)},{default:n(()=>[t(re,{icon:e(Z),title:"Gestión de documentos de identidad",isFetching:e(d),"onReset:initialForm":x},null,8,["icon","isFetching"]),t(De,{form:e(c),onReset:z},null,8,["form"]),t(ue,{render:!!s.searchParam,filters:[{render:!!s.searchParam,tag:"Búsqueda",name:s.searchParam,handleClick:()=>{F.value+=1,s.searchParam="",s.page=1}}]},null,8,["render","filters"]),t(me,{data:e(m),columns:L,"delete-name":e(S).identity_document,"delete-url":`${e(u).identity_document}/${e(u).destroy_action}`,"title-dialog":"¿Estás seguro que quieres eliminar a las documentos seleccionadas?","description-dialog":"Esta acción no se podrá deshacer. Esto eliminará a los documentos de identidad seleccionados permanentemente.","on-search-input":v,"input-render":F.value},null,8,["data","delete-name","delete-url","input-render"]),e(_)?(h(),$(_e,{key:0,meta:e(_),"on-change-page":l,"on-change-limit":p},null,8,["meta"])):ee("",!0)]),_:1},8,["open"]))}}),ke=b({__name:"IdentityDocumentView",setup(r){return(s,d)=>(h(),$(ve))}});export{ke as default};
