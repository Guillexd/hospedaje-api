import{d as H,o as f,i as $,w as s,j as e,u as a,m as l,k as r,v as y,A as W,h as E,a as U,B as X,C as Z,D as Q,E as C,F as Y,I as aa,J as z,e as ea,N as P,L as F,f as g,s as L,Z as sa,M as ta,O as oa,P as na,$ as ia,p as la,R as ra,S as ua,T as p,a5 as da,a6 as ma,a7 as A,q as ca}from"./app-DUQC492O.js";import{e as V,F as B,_ as j,a as q,b as I,d as N,c as _a,u as fa}from"./Input.vue_vue_type_script_setup_true_lang-DNPmUyXs.js";import{E as pa,_ as ga,S as ha,a as va,b as $a,c as ba,m as wa,n as xa,o as ya,p as ka,q as Sa,r as Ha,d as Ra,e as Da,f as O,g as Pa,h as Ea,i as Aa,j as Va,k as Ca,l as Fa}from"./FilterBarPresentation.vue_vue_type_script_setup_true_lang-DXtXaAt5.js";import{_ as Ba,a as ja,b as qa,c as Ia,d as Na,e as Oa}from"./DrawerTitle.vue_vue_type_script_setup_true_lang-Dhdb9SQB.js";import{B as Ua,a as za}from"./badge-x-aoUUpoNj.js";import{E as La}from"./eye-DXLPxJil.js";import{t as Ma,_ as Ta}from"./tableNames-DVrWydeL.js";import{u as Ga}from"./useFetchHousingRoom-C55UZsnb.js";const Ja={class:"mx-auto w-full max-w-lg p-4"},Ka={class:"mt-4 bg-white dark:bg-slate-300 shadow-lg rounded-lg p-4"},Wa={class:"mb-4"},Xa={class:"flex justify-between"},Za={class:"text-gray-700"},Qa={class:"flex justify-between"},Ya={class:"text-gray-700"},ae={class:"flex justify-between"},ee={class:"text-gray-700 font-semibold flex gap-x-2"},se=H({__name:"HousingRoomDetail",props:{isDrawerOpen:{type:Boolean},housing_room:{}},emits:["update:drawer-state"],setup(h,{emit:n}){const _=n;function b(u){_("update:drawer-state",u)}return(u,o)=>(f(),$(a(Oa),{open:u.isDrawerOpen,"onUpdate:open":o[0]||(o[0]=d=>b(d))},{default:s(()=>[e(a(Ba),null,{default:s(()=>[l("div",Ja,[e(a(ja),null,{default:s(()=>[e(a(qa),{class:"text-xl font-semibold dark:text-slate-200"},{default:s(()=>o[1]||(o[1]=[r("Detalles de la habitación")])),_:1}),e(a(Ia),{class:"text-gray-500"},{default:s(()=>o[2]||(o[2]=[r(" Aquí puedes ver los detalles de esta habitación. ")])),_:1})]),_:1}),l("div",Ka,[l("div",Wa,[o[6]||(o[6]=l("h3",{class:"text-lg font-bold"},"Información detallada",-1)),l("div",Xa,[o[3]||(o[3]=l("span",{class:"font-medium"},"Habitación:",-1)),l("span",Za,y(u.housing_room.room_number),1)]),l("div",Qa,[o[4]||(o[4]=l("span",{class:"font-medium"},"Propiedad:",-1)),l("span",Ya,y(u.housing_room.housing),1)]),l("div",ae,[o[5]||(o[5]=l("span",{class:"font-medium"},"Estado:",-1)),l("span",ee,[r(y(u.housing_room.is_active?"Activo":"No activo")+" ",1),u.housing_room.is_active?(f(),$(a(Ua),{key:0,class:"text-green-500"})):(f(),$(a(za),{key:1,class:"text-red-700"}))])])])]),e(a(Na),{class:"mt-4"},{default:s(()=>[e(a(W),{"as-child":""},{default:s(()=>[e(V,{variant:"outline",class:"w-full dark:text-slate-200"},{default:s(()=>o[7]||(o[7]=[r(" Cerrar ")])),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["open"]))}}),te=H({__name:"DropdownHousingRoomOptions",props:{housing_room:{}},emits:["update:housing-room-form"],setup(h,{emit:n}){const _=h,b=n;function u(){b("update:housing-room-form",_.housing_room)}const o=E(!1),d=()=>{o.value=!0},w=x=>{o.value=x};return(x,m)=>(f(),U(z,null,[e(a(aa),null,{default:s(()=>[e(a(X),{"as-child":""},{default:s(()=>[e(a(V),{variant:"ghost",class:"w-8 h-8 p-0"},{default:s(()=>[m[0]||(m[0]=l("span",{class:"sr-only"},"Abrir menu",-1)),e(a(pa),{class:"w-4 h-4"})]),_:1})]),_:1}),e(a(Z),{align:"end"},{default:s(()=>[e(a(Q),null,{default:s(()=>m[1]||(m[1]=[r("Opciones")])),_:1}),e(a(C),{onClick:Y(d,["stop"]),class:"flex items-center gap-x-2 py-2 cursor-pointer"},{default:s(()=>[e(a(La),{class:"w-5 h-5"}),m[2]||(m[2]=r(" Ver "))]),_:1}),e(ga,{class:"w-full"},{default:s(()=>[e(a(C),{onClick:u,class:"flex items-center gap-x-2 text-sky-800 py-2 cursor-pointer"},{default:s(()=>[e(a(ha),{class:"w-5 h-5"}),m[3]||(m[3]=r(" Editar "))]),_:1})]),_:1})]),_:1})]),_:1}),e(se,{"is-drawer-open":o.value,housing_room:x.housing_room,"onUpdate:drawerState":w},null,8,["is-drawer-open","housing_room"])],64))}});function oe(h){return ea(P.housing_room,h)}const ne={class:"flex flex-col sm:grid grid-cols-2 gap-x-2 gap-y-1 overflow-y-auto max-h-[71vh] p-1"},ie=H({__name:"HousingRoomModal",props:{form:{}},emits:["reset"],setup(h,{emit:n}){const _=h,b=n;function u(){b("reset")}const o=F(()=>!!_.form.values.id),d=F(()=>({url:`${g.housing_room}/${o.value?g.update_action:g.store_action}`,method:o.value?g.put:g.post})),{isPending:w,mutateAsync:x}=oe(d),m=_.form.handleSubmit(D=>L(x(D),`${o.value?"Editando":"Agregando"}...`,()=>(u(),`Habitación ${o.value?"actualizada":"agregada"} con éxito`),c=>typeof c=="object"?(_.form.setErrors(c),"Acción fallida"):c)),R=E([]);return sa(async()=>{R.value=(await ta(`${g.housing}/${g.get_active}`)).data}),(D,c)=>(f(),$(a(Da),{class:"sm:max-w-[600px] text-slate-800 dark:dark:text-slate-200"},{default:s(()=>[e(a(va),null,{default:s(()=>[e(a($a),null,{default:s(()=>[r(y(o.value?"Editar":"Agregar")+" habitación",1)]),_:1}),e(a(ba),null,{default:s(()=>[r(" Haz los cambios de la habitación aquí. Click "+y(o.value?"Editar":"Agregar")+" cuando termines. ",1)]),_:1})]),_:1}),l("form",{onSubmit:c[0]||(c[0]=(...v)=>a(m)&&a(m)(...v)),"keep-values":""},[l("section",ne,[e(a(B),{name:"housing_id"},{default:s(({componentField:v})=>[e(a(j),null,{default:s(()=>[e(a(q),null,{default:s(()=>c[1]||(c[1]=[r("Propiedad")])),_:1}),e(a(wa),oa(na(v)),{default:s(()=>[e(a(I),null,{default:s(()=>[e(a(xa),null,{default:s(()=>[e(a(ya),{placeholder:"Selecciona la propiedad"})]),_:1})]),_:1}),e(a(ka),null,{default:s(()=>[e(a(Sa),null,{default:s(()=>[(f(!0),U(z,null,ia(R.value,k=>(f(),$(a(Ha),{value:k.id.toString()},{default:s(()=>[r(y(k.name),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1})]),_:2},1040),e(a(N))]),_:2},1024)]),_:1}),e(a(B),{name:"room_number"},{default:s(({componentField:v})=>[e(a(j),null,{default:s(()=>[e(a(q),null,{default:s(()=>c[2]||(c[2]=[r("Habitación")])),_:1}),e(a(I),null,{default:s(()=>[e(a(_a),la(v,{autocomplete:"off"}),null,16)]),_:2},1024),e(a(N))]),_:2},1024)]),_:1})]),e(a(Ra),null,{default:s(()=>[e(a(V),{type:"submit",class:"w-full mt-3 p-1",disabled:a(w)},{default:s(()=>[r(y(o.value?"Editar":"Agregar"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1}))}}),le={class:"flex flex-col sm:flex-row justify-center gap-y-2 mt-3 py-3 shadow-sm dark:bg-slate-900 rounded-lg"},re=H({__name:"HousingRoomContainer",setup(h){const n=ra({page:1,limit:window.innerWidth<768?5:10,searchParam:"",roomState:"all"}),{isFetching:_,data:b,meta:u}=Ga(P.housing_room,n),o={id:void 0,housing_id:void 0,room_number:""},d=Fa(),w=fa(),x=()=>{w.setValues(o)},m=t=>{w.setValues(t)},R=t=>{n.page=1,n.searchParam=t},D=t=>{n.page=t},c=t=>{n.page=1,n.limit=t},v=E(0),k=E(!1),M=()=>{k.value=!1},{isPending:T,mutateAsync:G}=ua(P.housing_room,Ma.housing_room),J=(t,i)=>L(G({id:t,state:i}),`${i?"Activando":"Desactivando"}...`,()=>`Habitación ${i?"activada":"desactivada"} con éxito`,S=>typeof S=="object"?"Acción fallida":S),K=[d.display({id:"select",header:({table:t})=>p(O,{checked:t.getIsAllPageRowsSelected()||t.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:checked":i=>t.toggleAllPageRowsSelected(!!i),ariaLabel:"Select all",class:"mr-2 md:mr-0"}),cell:({row:t})=>p(O,{checked:t.getIsSelected(),"onUpdate:checked":i=>t.toggleSelected(!!i),ariaLabel:"Select row"}),enableHiding:!1}),d.accessor("id",{header:"ID",cell:t=>p("span",t.getValue())}),d.accessor("room_number",{header:"Habitación",cell:t=>p("div",{class:"capitalize min-w-20"},t.getValue())}),d.accessor("housing",{header:"Propiedad",cell:t=>p("div",{class:"capitalize min-w-28"},t.getValue())}),d.accessor("is_available",{header:"Disponibilidad",cell:t=>p("div",t.getValue()?"Disponible":"Ocupado")}),d.accessor("is_active",{header:"Estado",cell:({row:t})=>p(Ta,{checked:!!t.getValue("is_active"),"onUpdate:checked":()=>J(t.getValue("id"),!t.getValue("is_active")),disabled:T.value||_.value})}),d.display({id:"actions",cell:({row:t})=>{const i=t.original;return p("div",{class:"relative"},p(te,{housing_room:i,"onUpdate:housingRoomForm":m}))},enableHiding:!1})];return(t,i)=>(f(),$(a(Ca),{open:k.value,"onUpdate:open":i[1]||(i[1]=S=>k.value=S)},{default:s(()=>[e(Pa,{icon:a(da),title:"Gestión de habitaciones",isFetching:a(_),"onReset:initialForm":x},null,8,["icon","isFetching"]),e(ie,{form:a(w),onReset:M},null,8,["form"]),l("section",le,[e(a(ma),{type:"single",class:"dark:text-slate-200","model-value":n.roomState,"onUpdate:modelValue":i[0]||(i[0]=S=>n.roomState=S)},{default:s(()=>[e(a(A),{value:"all","aria-label":"Toggle bold"},{default:s(()=>i[2]||(i[2]=[r(" Todas ")])),_:1}),e(a(A),{value:"available"},{default:s(()=>i[3]||(i[3]=[r(" Disponibles ")])),_:1}),e(a(A),{value:"not_available"},{default:s(()=>i[4]||(i[4]=[r(" Ocupadas ")])),_:1})]),_:1},8,["model-value"])]),e(Ea,{render:!!n.searchParam,filters:[{render:!!n.searchParam,tag:"Búsqueda",name:n.searchParam,handleClick:()=>{v.value+=1,n.searchParam="",n.page=1}}]},null,8,["render","filters"]),e(Aa,{data:a(b),columns:K,"delete-name":a(P).housing_room,"delete-url":`${a(g).housing_room}/${a(g).destroy_action}`,"title-dialog":"¿Estás seguro que quieres eliminar a las habitaciones seleccionadas?","description-dialog":"Esta acción no se podrá deshacer. Esto eliminará a las habitaciones seleccionadas permanentemente.","on-search-input":R,"input-render":v.value},null,8,["data","delete-name","delete-url","input-render"]),a(u)?(f(),$(Va,{key:0,meta:a(u),"on-change-page":D,"on-change-limit":c},null,8,["meta"])):ca("",!0)]),_:1},8,["open"]))}}),he=H({__name:"HousingRoomView",setup(h){return(n,_)=>(f(),$(re))}});export{he as default};
