import{d as H,o as f,i as $,w as s,k as a,m as i,u as e,l as d,t as y,v as G,h as E,a as O,x as J,y as X,z as Q,A as V,B as Y,E as Z,F as z,e as ee,J as D,H as C,s as U,V as ae,I as se,f as g,K as te,L as oe,W as ne,p as ie,N as le,O as re,P as p,R as ue,q as de}from"./app-BzogWq3N.js";import{e as A,_ as F,a as B,b as q,d as I,F as N,c as ce,u as me}from"./Input.vue_vue_type_script_setup_true_lang-McNBwyOQ.js";import{E as _e,_ as fe,S as pe,a as ge,b as he,c as ve,m as $e,n as be,o as we,p as xe,q as ye,d as ke,e as He,r as Re,f as j,g as Se,h as Pe,i as De,j as Ee,k as Ae,l as Ve}from"./FilterBarPresentation.vue_vue_type_script_setup_true_lang-REgAknU8.js";import{_ as Ce,a as Fe,b as Be,c as qe,d as Ie,e as Ne}from"./DrawerTitle.vue_vue_type_script_setup_true_lang-D48Asx6l.js";import{B as je,a as Oe}from"./badge-x-BKI4MEgb.js";import{E as ze}from"./eye-BPF3Mlxr.js";import{t as Ue,_ as Le}from"./tableNames-C9e9A7l2.js";import{u as Me}from"./useFetchHousingRoom-BVVqD-yk.js";const Ke={class:"mx-auto w-full max-w-lg p-4"},Te={class:"mt-4 bg-white dark:bg-slate-300 shadow-lg rounded-lg p-4"},We={class:"mb-4"},Ge={class:"flex justify-between"},Je={class:"text-gray-700"},Xe={class:"flex justify-between"},Qe={class:"text-gray-700"},Ye={class:"flex justify-between"},Ze={class:"text-gray-700 font-semibold flex gap-x-2"},ea=H({__name:"HousingRoomDetail",props:{isDrawerOpen:{type:Boolean},housing_room:{}},emits:["update:drawer-state"],setup(h,{emit:n}){const _=n;function b(l){_("update:drawer-state",l)}return(l,o)=>(f(),$(e(Ne),{open:l.isDrawerOpen,"onUpdate:open":o[0]||(o[0]=r=>b(r))},{default:s(()=>[a(e(Ie),null,{default:s(()=>[i("div",Ke,[a(e(Ce),null,{default:s(()=>[a(e(Fe),{class:"text-xl font-semibold dark:text-slate-200"},{default:s(()=>o[1]||(o[1]=[d("Detalles de la habitación")])),_:1}),a(e(Be),{class:"text-gray-500"},{default:s(()=>o[2]||(o[2]=[d(" Aquí puedes ver los detalles de esta habitación. ")])),_:1})]),_:1}),i("div",Te,[i("div",We,[o[6]||(o[6]=i("h3",{class:"text-lg font-bold"},"Información detallada",-1)),i("div",Ge,[o[3]||(o[3]=i("span",{class:"font-medium"},"Habitación:",-1)),i("span",Je,y(l.housing_room.room_number),1)]),i("div",Xe,[o[4]||(o[4]=i("span",{class:"font-medium"},"Propiedad:",-1)),i("span",Qe,y(l.housing_room.housing),1)]),i("div",Ye,[o[5]||(o[5]=i("span",{class:"font-medium"},"Estado:",-1)),i("span",Ze,[d(y(l.housing_room.is_active?"Activo":"No activo")+" ",1),l.housing_room.is_active?(f(),$(e(je),{key:0,class:"text-green-500"})):(f(),$(e(Oe),{key:1,class:"text-red-700"}))])])])]),a(e(qe),{class:"mt-4"},{default:s(()=>[a(e(G),{"as-child":""},{default:s(()=>[a(A,{variant:"outline",class:"w-full dark:text-slate-200"},{default:s(()=>o[7]||(o[7]=[d(" Cerrar ")])),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["open"]))}}),aa=H({__name:"DropdownHousingRoomOptions",props:{housing_room:{}},emits:["update:housing-room-form"],setup(h,{emit:n}){const _=h,b=n;function l(){b("update:housing-room-form",_.housing_room)}const o=E(!1),r=()=>{o.value=!0},w=x=>{o.value=x};return(x,u)=>(f(),O(z,null,[a(e(Z),null,{default:s(()=>[a(e(J),{"as-child":""},{default:s(()=>[a(e(A),{variant:"ghost",class:"w-8 h-8 p-0"},{default:s(()=>[u[0]||(u[0]=i("span",{class:"sr-only"},"Abrir menu",-1)),a(e(_e),{class:"w-4 h-4"})]),_:1})]),_:1}),a(e(X),{align:"end"},{default:s(()=>[a(e(Q),null,{default:s(()=>u[1]||(u[1]=[d("Opciones")])),_:1}),a(e(V),{onClick:Y(r,["stop"]),class:"flex items-center gap-x-2 py-2 cursor-pointer"},{default:s(()=>[a(e(ze),{class:"w-5 h-5"}),u[2]||(u[2]=d(" Ver "))]),_:1}),a(fe,{class:"w-full"},{default:s(()=>[a(e(V),{onClick:l,class:"flex items-center gap-x-2 text-sky-800 py-2 cursor-pointer"},{default:s(()=>[a(e(pe),{class:"w-5 h-5"}),u[3]||(u[3]=d(" Editar "))]),_:1})]),_:1})]),_:1})]),_:1}),a(ea,{"is-drawer-open":o.value,housing_room:x.housing_room,"onUpdate:drawerState":w},null,8,["is-drawer-open","housing_room"])],64))}});function sa(h){return ee(D.housing_room,h)}const ta={class:"flex flex-col sm:grid grid-cols-2 gap-x-2 gap-y-1 overflow-y-auto max-h-[71vh] p-1"},oa=H({__name:"HousingRoomModal",props:{form:{}},emits:["reset"],setup(h,{emit:n}){const _=h,b=n;function l(){b("reset")}const o=C(()=>!!_.form.values.id),r=C(()=>({url:`${g.housing_room}/${o.value?g.update_action:g.store_action}`,method:o.value?g.put:g.post})),{isPending:w,mutateAsync:x}=sa(r),u=_.form.handleSubmit(S=>U(x(S),`${o.value?"Editando":"Agregando"}...`,()=>(l(),`Habitación ${o.value?"actualizada":"agregada"} con éxito`),c=>typeof c=="object"?(_.form.setErrors(c),"Acción fallida"):c)),R=E([]);return ae(async()=>{R.value=(await se(`${g.housing}/${g.get_active}`)).data}),(S,c)=>(f(),$(e(He),{class:"sm:max-w-[600px] text-slate-800 dark:dark:text-slate-200"},{default:s(()=>[a(e(ve),null,{default:s(()=>[a(e(ge),null,{default:s(()=>[d(y(o.value?"Editar":"Agregar")+" habitación",1)]),_:1}),a(e(he),null,{default:s(()=>[d(" Haz los cambios de la habitación aquí. Click "+y(o.value?"Editar":"Agregar")+" cuando termines. ",1)]),_:1})]),_:1}),i("form",{onSubmit:c[0]||(c[0]=(...v)=>e(u)&&e(u)(...v)),"keep-values":""},[i("section",ta,[a(e(N),{name:"housing_id"},{default:s(({componentField:v})=>[a(e(F),null,{default:s(()=>[a(e(B),null,{default:s(()=>c[1]||(c[1]=[d("Propiedad")])),_:1}),a(e($e),te(oe(v)),{default:s(()=>[a(e(q),null,{default:s(()=>[a(e(be),null,{default:s(()=>[a(e(we),{placeholder:"Selecciona la propiedad"})]),_:1})]),_:1}),a(e(xe),null,{default:s(()=>[a(e(ye),null,{default:s(()=>[(f(!0),O(z,null,ne(R.value,k=>(f(),$(e(Re),{value:k.id.toString()},{default:s(()=>[d(y(k.name),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1})]),_:2},1040),a(e(I))]),_:2},1024)]),_:1}),a(e(N),{name:"room_number"},{default:s(({componentField:v})=>[a(e(F),null,{default:s(()=>[a(e(B),null,{default:s(()=>c[2]||(c[2]=[d("Habitación")])),_:1}),a(e(q),null,{default:s(()=>[a(e(ce),ie(v,{autocomplete:"off"}),null,16)]),_:2},1024),a(e(I))]),_:2},1024)]),_:1})]),a(e(ke),null,{default:s(()=>[a(e(A),{type:"submit",class:"w-full mt-3 p-1",disabled:e(w)},{default:s(()=>[d(y(o.value?"Editar":"Agregar"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1}))}}),na=H({__name:"HousingRoomContainer",setup(h){const n=le({page:1,limit:window.innerWidth<768?5:10,searchParam:""}),{isFetching:_,data:b,meta:l}=Me(D.housing_room,n),o={id:void 0,housing_id:void 0,room_number:""},r=Ve(),w=me(),x=()=>{w.setValues(o)},u=t=>{w.setValues(t)},R=t=>{n.page=1,n.searchParam=t},S=t=>{n.page=t},c=t=>{n.page=1,n.limit=t},v=E(0),k=E(!1),L=()=>{k.value=!1},{isPending:M,mutateAsync:K}=re(D.housing_room,Ue.housing_room),T=(t,m)=>U(K({id:t,state:m}),`${m?"Activando":"Desactivando"}...`,()=>`Habitación ${m?"activada":"desactivada"} con éxito`,P=>typeof P=="object"?"Acción fallida":P),W=[r.display({id:"select",header:({table:t})=>p(j,{checked:t.getIsAllPageRowsSelected()||t.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:checked":m=>t.toggleAllPageRowsSelected(!!m),ariaLabel:"Select all",class:"mr-2 md:mr-0"}),cell:({row:t})=>p(j,{checked:t.getIsSelected(),"onUpdate:checked":m=>t.toggleSelected(!!m),ariaLabel:"Select row"}),enableHiding:!1}),r.accessor("id",{header:"ID",cell:t=>p("span",t.getValue())}),r.accessor("room_number",{header:"Habitación",cell:t=>p("div",{class:"capitalize min-w-20"},t.getValue())}),r.accessor("housing",{header:"Propiedad",cell:t=>p("div",{class:"capitalize min-w-28"},t.getValue())}),r.accessor("is_available",{header:"Disponibilidad",cell:t=>p("div",t.getValue()?"Disponible":"Ocupado")}),r.accessor("is_active",{header:"Estado",cell:({row:t})=>p(Le,{checked:!!t.getValue("is_active"),"onUpdate:checked":()=>T(t.getValue("id"),!t.getValue("is_active")),disabled:M.value||_.value})}),r.display({id:"actions",cell:({row:t})=>{const m=t.original;return p("div",{class:"relative"},p(aa,{housing_room:m,"onUpdate:housingRoomForm":u}))},enableHiding:!1})];return(t,m)=>(f(),$(e(Ae),{open:k.value,"onUpdate:open":m[0]||(m[0]=P=>k.value=P)},{default:s(()=>[a(Se,{icon:e(ue),title:"Gestión de habitaciones",isFetching:e(_),"onReset:initialForm":x},null,8,["icon","isFetching"]),a(oa,{form:e(w),onReset:L},null,8,["form"]),a(Pe,{render:!!n.searchParam,filters:[{render:!!n.searchParam,tag:"Busqueda",name:n.searchParam,handleClick:()=>{v.value+=1,n.searchParam="",n.page=1}}]},null,8,["render","filters"]),a(De,{data:e(b),columns:W,"delete-name":e(D).housing_room,"delete-url":`${e(g).housing_room}/${e(g).destroy_action}`,"title-dialog":"¿Estás seguro que quieres eliminar a las habitaciones seleccionadas?","description-dialog":"Esta acción no se podrá deshacer. Esto eliminará a las habitaciones seleccionadas permanentemente.","on-search-input":R,"input-render":v.value},null,8,["data","delete-name","delete-url","input-render"]),e(l)?(f(),$(Ee,{key:0,meta:e(l),"on-change-page":S,"on-change-limit":c},null,8,["meta"])):de("",!0)]),_:1},8,["open"]))}}),fa=H({__name:"HousingRoomView",setup(h){return(n,_)=>(f(),$(na))}});export{fa as default};
