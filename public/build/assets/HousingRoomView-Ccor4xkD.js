import{d as H,o as f,i as $,w as s,j as a,u as e,m as i,k as d,v as y,A as K,h as E,a as O,B as W,C as X,D as Z,E as C,F as Q,I as Y,J as U,e as ee,N as P,L as V,f as g,s as z,Z as ae,M as se,O as te,P as oe,$ as ne,p as ie,R as le,S as re,T as p,a5 as ue,q as de}from"./app-Cf09j8Ab.js";import{e as A,F,_ as B,a as j,b as q,d as I,c as ce,u as me}from"./Input.vue_vue_type_script_setup_true_lang-C_pB-Yai.js";import{E as _e,_ as fe,S as pe,a as ge,b as he,c as ve,m as $e,n as be,o as we,p as xe,q as ye,r as ke,d as He,e as Se,f as N,g as Re,h as De,i as Pe,j as Ee,k as Ae,l as Ce}from"./FilterBarPresentation.vue_vue_type_script_setup_true_lang-ChREqMRf.js";import{_ as Ve,a as Fe,b as Be,c as je,d as qe,e as Ie}from"./DrawerTitle.vue_vue_type_script_setup_true_lang-DYpLqPoS.js";import{B as Ne,a as Oe}from"./badge-x-B3QoSayT.js";import{E as Ue}from"./eye-BZbtSrg0.js";import{t as ze,_ as Le}from"./tableNames-nTDcFTWW.js";import{u as Me}from"./useFetchHousingRoom-CxLAB8sT.js";const Te={class:"mx-auto w-full max-w-lg p-4"},Ge={class:"mt-4 bg-white dark:bg-slate-300 shadow-lg rounded-lg p-4"},Je={class:"mb-4"},Ke={class:"flex justify-between"},We={class:"text-gray-700"},Xe={class:"flex justify-between"},Ze={class:"text-gray-700"},Qe={class:"flex justify-between"},Ye={class:"text-gray-700 font-semibold flex gap-x-2"},ea=H({__name:"HousingRoomDetail",props:{isDrawerOpen:{type:Boolean},housing_room:{}},emits:["update:drawer-state"],setup(h,{emit:n}){const _=n;function b(l){_("update:drawer-state",l)}return(l,o)=>(f(),$(e(Ie),{open:l.isDrawerOpen,"onUpdate:open":o[0]||(o[0]=r=>b(r))},{default:s(()=>[a(e(Ve),null,{default:s(()=>[i("div",Te,[a(e(Fe),null,{default:s(()=>[a(e(Be),{class:"text-xl font-semibold dark:text-slate-200"},{default:s(()=>o[1]||(o[1]=[d("Detalles de la habitación")])),_:1}),a(e(je),{class:"text-gray-500"},{default:s(()=>o[2]||(o[2]=[d(" Aquí puedes ver los detalles de esta habitación. ")])),_:1})]),_:1}),i("div",Ge,[i("div",Je,[o[6]||(o[6]=i("h3",{class:"text-lg font-bold"},"Información detallada",-1)),i("div",Ke,[o[3]||(o[3]=i("span",{class:"font-medium"},"Habitación:",-1)),i("span",We,y(l.housing_room.room_number),1)]),i("div",Xe,[o[4]||(o[4]=i("span",{class:"font-medium"},"Propiedad:",-1)),i("span",Ze,y(l.housing_room.housing),1)]),i("div",Qe,[o[5]||(o[5]=i("span",{class:"font-medium"},"Estado:",-1)),i("span",Ye,[d(y(l.housing_room.is_active?"Activo":"No activo")+" ",1),l.housing_room.is_active?(f(),$(e(Ne),{key:0,class:"text-green-500"})):(f(),$(e(Oe),{key:1,class:"text-red-700"}))])])])]),a(e(qe),{class:"mt-4"},{default:s(()=>[a(e(K),{"as-child":""},{default:s(()=>[a(A,{variant:"outline",class:"w-full dark:text-slate-200"},{default:s(()=>o[7]||(o[7]=[d(" Cerrar ")])),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["open"]))}}),aa=H({__name:"DropdownHousingRoomOptions",props:{housing_room:{}},emits:["update:housing-room-form"],setup(h,{emit:n}){const _=h,b=n;function l(){b("update:housing-room-form",_.housing_room)}const o=E(!1),r=()=>{o.value=!0},w=x=>{o.value=x};return(x,u)=>(f(),O(U,null,[a(e(Y),null,{default:s(()=>[a(e(W),{"as-child":""},{default:s(()=>[a(e(A),{variant:"ghost",class:"w-8 h-8 p-0"},{default:s(()=>[u[0]||(u[0]=i("span",{class:"sr-only"},"Abrir menu",-1)),a(e(_e),{class:"w-4 h-4"})]),_:1})]),_:1}),a(e(X),{align:"end"},{default:s(()=>[a(e(Z),null,{default:s(()=>u[1]||(u[1]=[d("Opciones")])),_:1}),a(e(C),{onClick:Q(r,["stop"]),class:"flex items-center gap-x-2 py-2 cursor-pointer"},{default:s(()=>[a(e(Ue),{class:"w-5 h-5"}),u[2]||(u[2]=d(" Ver "))]),_:1}),a(fe,{class:"w-full"},{default:s(()=>[a(e(C),{onClick:l,class:"flex items-center gap-x-2 text-sky-800 py-2 cursor-pointer"},{default:s(()=>[a(e(pe),{class:"w-5 h-5"}),u[3]||(u[3]=d(" Editar "))]),_:1})]),_:1})]),_:1})]),_:1}),a(ea,{"is-drawer-open":o.value,housing_room:x.housing_room,"onUpdate:drawerState":w},null,8,["is-drawer-open","housing_room"])],64))}});function sa(h){return ee(P.housing_room,h)}const ta={class:"flex flex-col sm:grid grid-cols-2 gap-x-2 gap-y-1 overflow-y-auto max-h-[71vh] p-1"},oa=H({__name:"HousingRoomModal",props:{form:{}},emits:["reset"],setup(h,{emit:n}){const _=h,b=n;function l(){b("reset")}const o=V(()=>!!_.form.values.id),r=V(()=>({url:`${g.housing_room}/${o.value?g.update_action:g.store_action}`,method:o.value?g.put:g.post})),{isPending:w,mutateAsync:x}=sa(r),u=_.form.handleSubmit(R=>z(x(R),`${o.value?"Editando":"Agregando"}...`,()=>(l(),`Habitación ${o.value?"actualizada":"agregada"} con éxito`),c=>typeof c=="object"?(_.form.setErrors(c),"Acción fallida"):c)),S=E([]);return ae(async()=>{S.value=(await se(`${g.housing}/${g.get_active}`)).data}),(R,c)=>(f(),$(e(Se),{class:"sm:max-w-[600px] text-slate-800 dark:dark:text-slate-200"},{default:s(()=>[a(e(ge),null,{default:s(()=>[a(e(he),null,{default:s(()=>[d(y(o.value?"Editar":"Agregar")+" habitación",1)]),_:1}),a(e(ve),null,{default:s(()=>[d(" Haz los cambios de la habitación aquí. Click "+y(o.value?"Editar":"Agregar")+" cuando termines. ",1)]),_:1})]),_:1}),i("form",{onSubmit:c[0]||(c[0]=(...v)=>e(u)&&e(u)(...v)),"keep-values":""},[i("section",ta,[a(e(F),{name:"housing_id"},{default:s(({componentField:v})=>[a(e(B),null,{default:s(()=>[a(e(j),null,{default:s(()=>c[1]||(c[1]=[d("Propiedad")])),_:1}),a(e($e),te(oe(v)),{default:s(()=>[a(e(q),null,{default:s(()=>[a(e(be),null,{default:s(()=>[a(e(we),{placeholder:"Selecciona la propiedad"})]),_:1})]),_:1}),a(e(xe),null,{default:s(()=>[a(e(ye),null,{default:s(()=>[(f(!0),O(U,null,ne(S.value,k=>(f(),$(e(ke),{value:k.id.toString()},{default:s(()=>[d(y(k.name),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1})]),_:2},1040),a(e(I))]),_:2},1024)]),_:1}),a(e(F),{name:"room_number"},{default:s(({componentField:v})=>[a(e(B),null,{default:s(()=>[a(e(j),null,{default:s(()=>c[2]||(c[2]=[d("Habitación")])),_:1}),a(e(q),null,{default:s(()=>[a(e(ce),ie(v,{autocomplete:"off"}),null,16)]),_:2},1024),a(e(I))]),_:2},1024)]),_:1})]),a(e(He),null,{default:s(()=>[a(e(A),{type:"submit",class:"w-full mt-3 p-1",disabled:e(w)},{default:s(()=>[d(y(o.value?"Editar":"Agregar"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1}))}}),na=H({__name:"HousingRoomContainer",setup(h){const n=le({page:1,limit:window.innerWidth<768?5:10,searchParam:""}),{isFetching:_,data:b,meta:l}=Me(P.housing_room,n),o={id:void 0,housing_id:void 0,room_number:""},r=Ce(),w=me(),x=()=>{w.setValues(o)},u=t=>{w.setValues(t)},S=t=>{n.page=1,n.searchParam=t},R=t=>{n.page=t},c=t=>{n.page=1,n.limit=t},v=E(0),k=E(!1),L=()=>{k.value=!1},{isPending:M,mutateAsync:T}=re(P.housing_room,ze.housing_room),G=(t,m)=>z(T({id:t,state:m}),`${m?"Activando":"Desactivando"}...`,()=>`Habitación ${m?"activada":"desactivada"} con éxito`,D=>typeof D=="object"?"Acción fallida":D),J=[r.display({id:"select",header:({table:t})=>p(N,{checked:t.getIsAllPageRowsSelected()||t.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:checked":m=>t.toggleAllPageRowsSelected(!!m),ariaLabel:"Select all",class:"mr-2 md:mr-0"}),cell:({row:t})=>p(N,{checked:t.getIsSelected(),"onUpdate:checked":m=>t.toggleSelected(!!m),ariaLabel:"Select row"}),enableHiding:!1}),r.accessor("id",{header:"ID",cell:t=>p("span",t.getValue())}),r.accessor("room_number",{header:"Habitación",cell:t=>p("div",{class:"capitalize min-w-20"},t.getValue())}),r.accessor("housing",{header:"Propiedad",cell:t=>p("div",{class:"capitalize min-w-28"},t.getValue())}),r.accessor("is_available",{header:"Disponibilidad",cell:t=>p("div",t.getValue()?"Disponible":"Ocupado")}),r.accessor("is_active",{header:"Estado",cell:({row:t})=>p(Le,{checked:!!t.getValue("is_active"),"onUpdate:checked":()=>G(t.getValue("id"),!t.getValue("is_active")),disabled:M.value||_.value})}),r.display({id:"actions",cell:({row:t})=>{const m=t.original;return p("div",{class:"relative"},p(aa,{housing_room:m,"onUpdate:housingRoomForm":u}))},enableHiding:!1})];return(t,m)=>(f(),$(e(Ae),{open:k.value,"onUpdate:open":m[0]||(m[0]=D=>k.value=D)},{default:s(()=>[a(Re,{icon:e(ue),title:"Gestión de habitaciones",isFetching:e(_),"onReset:initialForm":x},null,8,["icon","isFetching"]),a(oa,{form:e(w),onReset:L},null,8,["form"]),a(De,{render:!!n.searchParam,filters:[{render:!!n.searchParam,tag:"Búsqueda",name:n.searchParam,handleClick:()=>{v.value+=1,n.searchParam="",n.page=1}}]},null,8,["render","filters"]),a(Pe,{data:e(b),columns:J,"delete-name":e(P).housing_room,"delete-url":`${e(g).housing_room}/${e(g).destroy_action}`,"title-dialog":"¿Estás seguro que quieres eliminar a las habitaciones seleccionadas?","description-dialog":"Esta acción no se podrá deshacer. Esto eliminará a las habitaciones seleccionadas permanentemente.","on-search-input":S,"input-render":v.value},null,8,["data","delete-name","delete-url","input-render"]),e(l)?(f(),$(Ee,{key:0,meta:e(l),"on-change-page":R,"on-change-limit":c},null,8,["meta"])):de("",!0)]),_:1},8,["open"]))}}),fa=H({__name:"HousingRoomView",setup(h){return(n,_)=>(f(),$(na))}});export{fa as default};
