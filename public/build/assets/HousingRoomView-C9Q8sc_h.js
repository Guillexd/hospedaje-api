import{c as K,d as S,o as g,i as b,w as s,j as a,u as e,m as n,k as d,v as w,A as ne,h as V,a as W,B as le,C as ie,D as re,E as M,F as de,I as ue,J as X,e as me,N as P,L as O,f as h,s as Z,Z as ce,M as fe,O as _e,P as pe,$ as ge,p as q,R as he,S as ve,T as m,a5 as be,a6 as xe,a7 as E,q as $e}from"./app-B1TY8xWk.js";import{e as L,F as C,_ as A,a as F,b as j,d as B,c as ye,u as we}from"./Input.vue_vue_type_script_setup_true_lang-4LFd6wTb.js";import{E as ke,_ as He,S as Se,a as De,b as Re,c as Pe,m as N,n as z,o as U,p as T,q as G,r as I,d as Ve,e as Ee,f as J,g as Ce,h as Ae,i as Fe,j as je,k as Be,l as Ie}from"./FilterBarPresentation.vue_vue_type_script_setup_true_lang-CvDOSHXn.js";import{_ as Le,a as Me,b as Oe,c as qe,d as Ne,e as ze}from"./DrawerTitle.vue_vue_type_script_setup_true_lang-43d8401m.js";import{B as Ue,a as Te}from"./badge-x-SivbVnpT.js";import{E as Ge}from"./eye-BnZn7LQ0.js";import{t as Je,_ as Ke}from"./tableNames-CMp9GEF9.js";import{u as We}from"./useFetchHousingRoom-BKNc609X.js";/**
 * @license lucide-vue-next v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=K("ListCheckIcon",[["path",{d:"M11 18H3",key:"n3j2dh"}],["path",{d:"m15 18 2 2 4-4",key:"1szwhi"}],["path",{d:"M16 12H3",key:"1a2rj7"}],["path",{d:"M16 6H3",key:"1wxfjs"}]]);/**
 * @license lucide-vue-next v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=K("LockIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Xe={class:"mx-auto w-full max-w-lg p-4"},Ze={class:"mt-4 bg-white dark:bg-slate-300 shadow-lg rounded-lg p-4"},Qe={class:"mb-4"},Ye={class:"flex justify-between"},ea={class:"text-gray-700"},aa={class:"flex justify-between"},sa={class:"text-gray-700"},ta={class:"flex justify-between"},oa={class:"text-gray-700 font-semibold flex gap-x-2"},na=S({__name:"HousingRoomDetail",props:{isDrawerOpen:{type:Boolean},housing_room:{}},emits:["update:drawer-state"],setup(v,{emit:l}){const _=l;function x(u){_("update:drawer-state",u)}return(u,o)=>(g(),b(e(ze),{open:u.isDrawerOpen,"onUpdate:open":o[0]||(o[0]=c=>x(c))},{default:s(()=>[a(e(Le),null,{default:s(()=>[n("div",Xe,[a(e(Me),null,{default:s(()=>[a(e(Oe),{class:"text-xl font-semibold dark:text-slate-200"},{default:s(()=>o[1]||(o[1]=[d("Detalles de la habitación")])),_:1}),a(e(qe),{class:"text-gray-500"},{default:s(()=>o[2]||(o[2]=[d(" Aquí puedes ver los detalles de esta habitación. ")])),_:1})]),_:1}),n("div",Ze,[n("div",Qe,[o[6]||(o[6]=n("h3",{class:"text-lg font-bold"},"Información detallada",-1)),n("div",Ye,[o[3]||(o[3]=n("span",{class:"font-medium"},"Habitación:",-1)),n("span",ea,w(u.housing_room.room_number),1)]),n("div",aa,[o[4]||(o[4]=n("span",{class:"font-medium"},"Propiedad:",-1)),n("span",sa,w(u.housing_room.housing),1)]),n("div",ta,[o[5]||(o[5]=n("span",{class:"font-medium"},"Estado:",-1)),n("span",oa,[d(w(u.housing_room.is_active?"Activo":"No activo")+" ",1),u.housing_room.is_active?(g(),b(e(Ue),{key:0,class:"text-green-500"})):(g(),b(e(Te),{key:1,class:"text-red-700"}))])])])]),a(e(Ne),{class:"mt-4"},{default:s(()=>[a(e(ne),{"as-child":""},{default:s(()=>[a(L,{variant:"outline",class:"w-full dark:text-slate-200"},{default:s(()=>o[7]||(o[7]=[d(" Cerrar ")])),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["open"]))}}),la=S({__name:"DropdownHousingRoomOptions",props:{housing_room:{}},emits:["update:housing-room-form"],setup(v,{emit:l}){const _=v,x=l;function u(){x("update:housing-room-form",_.housing_room)}const o=V(!1),c=()=>{o.value=!0},$=y=>{o.value=y};return(y,f)=>(g(),W(X,null,[a(e(ue),null,{default:s(()=>[a(e(le),{"as-child":""},{default:s(()=>[a(e(L),{variant:"ghost",class:"w-8 h-8 p-0"},{default:s(()=>[f[0]||(f[0]=n("span",{class:"sr-only"},"Abrir menu",-1)),a(e(ke),{class:"w-4 h-4"})]),_:1})]),_:1}),a(e(ie),{align:"end"},{default:s(()=>[a(e(re),null,{default:s(()=>f[1]||(f[1]=[d("Opciones")])),_:1}),a(e(M),{onClick:de(c,["stop"]),class:"flex items-center gap-x-2 py-2 cursor-pointer"},{default:s(()=>[a(e(Ge),{class:"w-5 h-5"}),f[2]||(f[2]=d(" Ver "))]),_:1}),a(He,{class:"w-full"},{default:s(()=>[a(e(M),{onClick:u,class:"flex items-center gap-x-2 text-sky-700 dark:text-sky-500 py-2 cursor-pointer"},{default:s(()=>[a(e(Se),{class:"w-5 h-5"}),f[3]||(f[3]=d(" Editar "))]),_:1})]),_:1})]),_:1})]),_:1}),a(na,{"is-drawer-open":o.value,housing_room:y.housing_room,"onUpdate:drawerState":$},null,8,["is-drawer-open","housing_room"])],64))}});function ia(v){return me(P.housing_room,v)}const ra={class:"flex flex-col sm:grid grid-cols-2 gap-x-2 gap-y-1 overflow-y-auto max-h-[71vh] p-1"},da={class:"flex items-center gap-1 text-cyan-600 dark:text-cyan-500"},ua={class:"flex items-center gap-1 text-gray-500"},ma=S({__name:"HousingRoomModal",props:{form:{}},emits:["reset"],setup(v,{emit:l}){const _=v,x=l;function u(){x("reset")}const o=O(()=>!!_.form.values.id),c=O(()=>({url:`${h.housing_room}/${o.value?h.update_action:h.store_action}`,method:o.value?h.put:h.post})),{isPending:$,mutateAsync:y}=ia(c),f=_.form.handleSubmit(R=>Z(y(R),`${o.value?"Editando":"Agregando"}...`,()=>(u(),`Habitación ${o.value?"actualizada":"agregada"} con éxito`),r=>typeof r=="object"?(_.form.setErrors(r),"Acción fallida"):r)),D=V([]);return ce(async()=>{D.value=(await fe(`${h.housing}/${h.get_active}`)).data}),(R,r)=>(g(),b(e(Ee),{class:"sm:max-w-[600px] text-slate-800 dark:dark:text-slate-200"},{default:s(()=>[a(e(De),null,{default:s(()=>[a(e(Re),null,{default:s(()=>[d(w(o.value?"Editar":"Agregar")+" habitación",1)]),_:1}),a(e(Pe),null,{default:s(()=>[d(" Haz los cambios de la habitación aquí. Click "+w(o.value?"Editar":"Agregar")+" cuando termines. ",1)]),_:1})]),_:1}),n("form",{onSubmit:r[0]||(r[0]=(...p)=>e(f)&&e(f)(...p)),"keep-values":""},[n("section",ra,[a(e(C),{name:"housing_id"},{default:s(({componentField:p})=>[a(e(A),null,{default:s(()=>[a(e(F),null,{default:s(()=>r[1]||(r[1]=[d("Propiedad")])),_:1}),a(e(N),_e(pe(p)),{default:s(()=>[a(e(j),null,{default:s(()=>[a(e(z),null,{default:s(()=>[a(e(U),{placeholder:"Selecciona la propiedad"})]),_:1})]),_:1}),a(e(T),null,{default:s(()=>[a(e(G),null,{default:s(()=>[(g(!0),W(X,null,ge(D.value,k=>(g(),b(e(I),{value:k.id.toString()},{default:s(()=>[d(w(k.name),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1})]),_:2},1040),a(e(B))]),_:2},1024)]),_:1}),a(e(C),{name:"room_number"},{default:s(({componentField:p})=>[a(e(A),null,{default:s(()=>[a(e(F),null,{default:s(()=>r[2]||(r[2]=[d("Habitación")])),_:1}),a(e(j),null,{default:s(()=>[a(e(ye),q(p,{autocomplete:"off"}),null,16)]),_:2},1024),a(e(B))]),_:2},1024)]),_:1}),a(e(C),{name:"is_available"},{default:s(({componentField:p})=>[a(e(A),{class:"col-span-full"},{default:s(()=>[a(e(F),null,{default:s(()=>r[3]||(r[3]=[d("Disponibilidad")])),_:1}),a(e(N),q(p,{modelValue:String(p.modelValue)}),{default:s(()=>[a(e(j),null,{default:s(()=>[a(e(z),null,{default:s(()=>[a(e(U),{placeholder:"Selecciona la disponibilidad"})]),_:1})]),_:1}),a(e(T),null,{default:s(()=>[a(e(G),null,{default:s(()=>[a(e(I),{value:"1"},{default:s(()=>[n("div",da,[a(e(Q)),r[4]||(r[4]=n("span",{class:"font-bold text-sm"}," Disponible ",-1))])]),_:1}),a(e(I),{value:"0"},{default:s(()=>[n("div",ua,[a(e(Y)),r[5]||(r[5]=n("span",{class:"font-bold text-sm"}," Ocupado ",-1))])]),_:1})]),_:1})]),_:1})]),_:2},1040,["modelValue"]),a(e(B))]),_:2},1024)]),_:1})]),a(e(Ve),null,{default:s(()=>[a(e(L),{type:"submit",class:"w-full mt-3 p-1",disabled:e($)},{default:s(()=>[d(w(o.value?"Editar":"Agregar"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1}))}}),ca={class:"flex flex-col sm:flex-row justify-center gap-y-2 mt-3 py-3 shadow-sm dark:bg-slate-900 rounded-lg"},fa=S({__name:"HousingRoomContainer",setup(v){const l=he({page:1,limit:window.innerWidth<768?5:10,searchParam:"",roomState:"all"}),{isFetching:_,data:x,meta:u}=We(P.housing_room,l),o={id:void 0,housing_id:void 0,room_number:"",is_available:1},c=Ie(),$=we(),y=()=>{$.setValues(o)},f=t=>{$.setValues(t)},D=t=>{l.page=1,l.searchParam=t},R=t=>{l.page=t},r=t=>{l.page=1,l.limit=t},p=V(0),k=V(!1),ee=()=>{k.value=!1},{isPending:ae,mutateAsync:se}=ve(P.housing_room,Je.housing_room),te=(t,i)=>Z(se({id:t,state:i}),`${i?"Activando":"Desactivando"}...`,()=>`Habitación ${i?"activada":"desactivada"} con éxito`,H=>typeof H=="object"?"Acción fallida":H),oe=[c.display({id:"select",header:({table:t})=>m(J,{checked:t.getIsAllPageRowsSelected()||t.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:checked":i=>t.toggleAllPageRowsSelected(!!i),ariaLabel:"Select all",class:"mr-2 md:mr-0"}),cell:({row:t})=>m(J,{checked:t.getIsSelected(),"onUpdate:checked":i=>t.toggleSelected(!!i),ariaLabel:"Select row"}),enableHiding:!1}),c.accessor("id",{header:"ID",cell:t=>m("span",t.getValue())}),c.accessor("room_number",{header:"Habitación",cell:t=>m("div",{class:"capitalize min-w-20"},t.getValue())}),c.accessor("housing",{header:"Propiedad",cell:t=>m("div",{class:"capitalize min-w-28"},t.getValue())}),c.accessor("is_available",{header:"Disponibilidad",cell:t=>t.getValue()?m("div",{class:"flex items-center gap-1 text-cyan-600 dark:text-cyan-500"},[m(Q),m("span",{class:"font-bold text-sm"},"Disponible")]):m("div",{class:"flex items-center gap-1 text-gray-500"},[m(Y),m("span",{class:"font-bold text-sm"},"Ocupado")])}),c.accessor("is_active",{header:"Estado",cell:({row:t})=>m(Ke,{checked:!!t.getValue("is_active"),"onUpdate:checked":()=>te(t.getValue("id"),!t.getValue("is_active")),disabled:ae.value||_.value})}),c.display({id:"actions",cell:({row:t})=>{const i=t.original;return m("div",{class:"relative"},m(la,{housing_room:i,"onUpdate:housingRoomForm":f}))},enableHiding:!1})];return(t,i)=>(g(),b(e(Be),{open:k.value,"onUpdate:open":i[1]||(i[1]=H=>k.value=H)},{default:s(()=>[a(Ce,{icon:e(be),title:"Gestión de habitaciones",isFetching:e(_),"onReset:initialForm":y},null,8,["icon","isFetching"]),a(ma,{form:e($),onReset:ee},null,8,["form"]),n("section",ca,[a(e(xe),{type:"single",class:"dark:text-slate-200","model-value":l.roomState,"onUpdate:modelValue":i[0]||(i[0]=H=>l.roomState=H)},{default:s(()=>[a(e(E),{value:"all","aria-label":"Toggle bold"},{default:s(()=>i[2]||(i[2]=[d(" Todas ")])),_:1}),a(e(E),{value:"available"},{default:s(()=>i[3]||(i[3]=[d(" Disponibles ")])),_:1}),a(e(E),{value:"not_available"},{default:s(()=>i[4]||(i[4]=[d(" Ocupadas ")])),_:1})]),_:1},8,["model-value"])]),a(Ae,{render:!!l.searchParam,filters:[{render:!!l.searchParam,tag:"Búsqueda",name:l.searchParam,handleClick:()=>{p.value+=1,l.searchParam="",l.page=1}}]},null,8,["render","filters"]),a(Fe,{data:e(x),columns:oe,"delete-name":e(P).housing_room,"delete-url":`${e(h).housing_room}/${e(h).destroy_action}`,"title-dialog":"¿Estás seguro que quieres eliminar a las habitaciones seleccionadas?","description-dialog":"Esta acción no se podrá deshacer. Esto eliminará a las habitaciones seleccionadas permanentemente.","on-search-input":D,"input-render":p.value},null,8,["data","delete-name","delete-url","input-render"]),e(u)?(g(),b(je,{key:0,meta:e(u),"on-change-page":R,"on-change-limit":r},null,8,["meta"])):$e("",!0)]),_:1},8,["open"]))}}),ya=S({__name:"HousingRoomView",setup(v){return(l,_)=>(g(),b(fa))}});export{ya as default};
